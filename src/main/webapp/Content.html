<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    
     <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.js"></script>
</head>

<body>
	
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<div class="container">    
            
    <div id="signupbox" style=" margin-top:100px" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
        <div class="panel panel-info">
            <div class="panel-heading">
            </div>  
            <div class="panel-body" >
                <form method="post" action=".">
                    <input type='hidden' name='csrfmiddlewaretoken' value='XFe2rTYl9WOpV8U6X5CfbIuOZOELJ97S' />
                            

                    <form  class="form-horizontal" method="post" >
                        <input type='hidden' name='csrfmiddlewaretoken' value='XFe2rTYl9WOpV8U6X5CfbIuOZOELJ97S' />
                        <div id="div_id_select" class="form-group required">
                          
                        </div> 
                       
                         <div id="div_id" class="form-group required">
                            <label for="id_id"> Id <span class="asteriskField">*</span> </label>
                            <div>
                                <input class="input-md  textinput textInput form-control" id="id_id" maxlength="30" name="id" placeholder="Choose Content's Id" style="margin-bottom: 10px" type="text" />
                                <button type="submit" name="deatils" class="btn btn-primary btn btn-info" id="id_details" >Détails</button>
                            </div>
                        </div>
                       
                        <div id="div_id_firstname" class="form-group required">
                            <label for="id_firstname" class="control-label col-md-4  requiredField">Name: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md  textinput textInput form-control" id="id_nom" maxlength="30" name="username" style="margin-bottom: 10px" type="text" />
                            </div>
                        </div>
                        
                        
                        <div id="div_id_nom" class="form-group required">
                            <label for="id_description" class="control-label col-md-4  requiredField">Description: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_description" name="description" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                         <div id="div_id_apprentissage" class="form-group required">
                            <label for="id_apprentissage" class="control-label col-md-4  requiredField">Apprentissage: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_apprentissage" name="apprentissage" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                        
                         <div id="div_id_volume" class="form-group required">
                            <label for="id_volume" class="control-label col-md-4  requiredField">Volume_Horaire: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_volume" name="horaire" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                        
                        <div id="div_id_etcs" class="form-group required">
                            <label for="id_etcs" class="control-label col-md-4  requiredField">Etcs: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_etcs" name="etcs" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                        
                        <div id="div_id_project" class="form-group required">
                            <label for="id_project" class="control-label col-md-4  requiredField">Volume_Project: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_project" name="project" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                         <div id="div_id_object" class="form-group required">
                            <label for="id_object" class="control-label col-md-4  requiredField">Objectives: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_object" name="objectives" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                         <div id="div_id_content" class="form-group required">
                            <label for="id_content" class="control-label col-md-4  requiredField">Contents: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_content" name="content" style="margin-bottom: 10px" type="text" />
                            </div> 
                        </div>
                        
                        <div id="div_id_biblio" class="form-group required">
                            <label for="id_biblio" class="control-label col-md-4  requiredField">Biblio: <span class="asteriskField">*</span> </label>
                            <div class="controls col-md-8 ">
                                <input class="input-md emailinput form-control" id="id_biblio" name="biblio" style="margin-bottom: 10px" type="email" />
                            </div> 
                        </div>
              
                        <div class="form-group"> 
                            <div class="aab controls col-md-4 "></div>
                            <div class="controls col-md-8 ">
                                <input type="submit" name="Signup" value="Modifier" class="btn btn-primary btn btn-info" id="id_modif" />
                            </div>
                        </div>        
                    </form>
                </form>
            </div>
        </div>
    </div> 
</div>

</div>            
	         
	

	<script>
	
	function httpGet(theUrl)
	{
	    var xmlHttp = new XMLHttpRequest();
	    xmlHttp.open( "GET", theUrl, false );
	    xmlHttp.send( null );
	    if (xmlhttp.status === 200) {
	        var result = xmlhttp.responseText;
	        return result;
	    } else {
	        var result = "Error" + " Status " + xmlhttp.status;
	        alert(result);
	        return result;
	    }

	}
	
	function httpPost(theUrl,data)
	{
	    var xmlHttp = new XMLHttpRequest();
	    xmlHttp.open( "POST", theUrl, false );
	    xmlHttp.setRequestHeader('Content-type','application/json');
	    xmlHttp.send(data);
	    xmlhttp.send(JSON.stringify({id: data[0], name: data[1]}));
	    if (xmlhttp.status === 200) {
	    	alert("Modification validée");
	        var result = xmlhttp.responseText;
	        return result;
	    } else {
	        var result = "Error" + " Status " + xmlhttp.status;
	        alert(result);
	        return result;
	    }
	}
	
	const buttonDetail = document.getElementById('id_details');
    buttonDetail.addEventListener('click',function(){
    	
    	var id = "id="+document.getElementById('id_id').value;
    	console.log(id);
    	console.log("http://localhost:8080/dauphine-pole-info/v1/getContent/one?"+id);
	    var content = httpGet("http://localhost:8080/dauphine-pole-info/v1/getContent/one?"+id);
	    var currentURL = document.URL; 
	    var result = JSON.parse(content);
	    console.log(result.projectVolume);
	   
	    document.getElementById('id_nom').value = result.projectVolume;
	    document.getElementById('id_description').value = result.description;
	    document.getElementById('id_apprentissage').value = result.training;
	    document.getElementById('id_volume').value = result.hourlyVolume;
	    document.getElementById('id_etcs').value = result.etcs;
	    document.getElementById('id_project').value = result.projectVolume;
	    document.getElementById('id_object').value = result.objectives;
	    document.getElementById('id_content').value = result.contents;
	    document.getElementById('id_biblio').value = result.biblio;

    });
	 
    
    const button = document.getElementById('id_modif');
    button.addEventListener('click',function(){
    	
	    var data = [];
	    data.push(document.getElementById('id_id').value);
	    data.push(document.getElementById('id_nom').value);
	    console.log(data[0]);
	    var res = httpPost("http://localhost:8080/dauphine-pole-info/v1/updateContent",data);
	    console.log(res);
	    
    });
    
	</script>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
	 crossorigin="anonymous"></script>
	 <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</body>

</html>